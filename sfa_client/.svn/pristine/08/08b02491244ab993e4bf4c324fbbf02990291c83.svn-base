page = 
{	 
	list: "",
		
    init:function(json)
	{
		page.initInterface();
		page.initData(json);
		page.initLayout();
	},
	initInterface:function()
	{
		 
	},	 
	initData:function(json)
	{
		 
	},	 
	initLayout:function()
	{		
		var layout = ipmutil.getDefaultLayout("영업일지 등록");
		bizMOB.Ui.displayView(layout);
		$.get("SD013_tab01.html", function(data){
			$(".bxslider").append(data);
			$.get("SD013_tab02.html", function(data){
				$(".bxslider").append(data);
				$.get("SD013_tab03.html", function(data){
					$(".bxslider").append(data);
					$.get("SD013_tab04.html", function(data){
						$(".bxslider").append(data);
						var slider = $('.bxslider').bxSlider({ 
							pager : false,
							controls: false,
							//adaptiveHeight: true,
							touchEnabled: true,
							swipeThreshold: 1,
							onSlideAfter: function(){
								$(".liTopMenu").removeClass("on");
								$($(".liTopMenu")[slider.getCurrentSlide()]).addClass("on");	
								
								switch(slider.getCurrentSlide()){
								case 0:
									//$(".bot_btn").css("display", "none");
									$(".bot_btn").slideUp(100);
									$(".bx-viewport").css("height", ($("#tab01").height() + 56) + "px");
									break;
								case 1:
									$(".bot_btn").css("display", "none");
									$(".t02_footer").slideDown(100);
									$(".bx-viewport").css("height", ($("#tab02").height() + 56) + "px");
									break;
								case 2:
									$(".bot_btn").css("display", "none");
									$(".t03_footer").slideDown(100);
									$(".bx-viewport").css("height", ($("#tab03").height() + 56) + "px");
									break;
								case 3:
									$(".bot_btn").css("display", "none");
									$(".t04_footer").slideDown(100);
									$(".bx-viewport").css("height", ($("#tab04").height() + 56) + "px");
									break;
								default:
									break;		
							}
							}
						});
						$(".topButtons").click(function(){
							slider.goToSlide($(this).attr("page") - 1); 
							
						});						
						page.onInitCompleted();
					});
				});
			});
		});
	},
	// HTML 모으고 bxSlider 기능 처리 후
	onInitCompleted: function(){
		//page.setCommonCombo();
		
		tab01.init();
		tab02.init();
		tab03.init();
		tab04.init();
		
		page.setCommonCombo();
	},
	
	setCommonCombo: function(callback){
		var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01301");
		tr.body.P01 = "";
		bizMOB.Web.post(
		{
			message:tr,
			success:function(json)
			{				
				if(!json.header.result)
				{
					bizMOB.Ui.alert("경고", json.header.error_text);
					return;
				}
				else
				{
					list = json.body;
					
					//if(callback) callback();
					
					//tab01.setComboBox(list);
					
					$(".Combo1 option").remove();
					$(".Combo2 option").remove();
					$(".Combo3 option").remove();
					$(".Combo4 option").remove();
					$(".Combo5 option").remove();
					
					var listCode1 = list.LIST01;

					for ( var i = 0; i < listCode1.length; i++) {
						$(".Combo1").append(
								"<option value='" + listCode1[i].R01 + "'>" + listCode1[i].R02 + "</option>");
					}
					
					var listCode2 = list.LIST02;

					for ( var i = 0; i < listCode2.length; i++) {
						$(".Combo2").append(
								"<option value='" + listCode2[i].R01 + "'>" + listCode2[i].R02 + "</option>");
					}
					
					var listCode3 = list.LIST03;

					for ( var i = 0; i < listCode3.length; i++) {
						$(".Combo3").append(
								"<option value='" + listCode3[i].R01 + "'>" + listCode3[i].R02 + "</option>");
					}
					
					var listCode4 = list.LIST04;

					for ( var i = 0; i < listCode4.length; i++) {
						$(".Combo4").append(
								"<option value='" + listCode4[i].R01 + "'>" + listCode4[i].R02 + "</option>");
					}
					
					var listCode5 = list.LIST05;

					for ( var i = 0; i < listCode5.length; i++) {
						$(".Combo5").append(
								"<option value='" + listCode5[i].R01 + "'>" + listCode5[i].R02 + "</option>");
					}
				}
			}		
		});		
	},
	
	setTypeLargeCombobox: function($selectID){
    	var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01202");
    	bizMOB.Web.post({
    		message: tr,
    		success: function(json){
    			if(!json.header.result || json.body.LIST01.length == 0){
    				bizMOB.Ui.alert("안내", "유형대 리스트를 가져오는데 실패하였습니다.");
    				return;
    			}
    			page.bindingCombobox($selectID, json.body.LIST01);
    			
    		}
    	});
    },
    
    setTypeMediumCombobox: function($selectID, $pSelectID, strValue){
    	var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01203");
    	tr.body.P01 = $pSelectID.val();
    	bizMOB.Web.post({
    		message: tr,
    		success: function(json){
    			if(!json.header.result || json.body.LIST01.length == 0){
    				bizMOB.Ui.alert("안내", "유형중 리스트를 가져오는데 실패하였습니다.");
    				return;
    			}
    			page.bindingCombobox($selectID, json.body.LIST01, strValue);
    		}
    	});
    },
    // 계약예상등급
    setContractExpactGradeCombobox: function(selID){
    	var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01303");
		tr.body.P01 = "Z01";
		tr.body.P02 = "";
		tr.body.P03 = "";
		
		bizMOB.Web.post({
			message: tr,
			success: function(json){
				if(!json.header.result){
					bizMOB.Ui.alert("안내", "계약예상등급 목록을 불러오는데 실패하였습니다.");
					return;
				}
				page.setComboBox(selID, json.body.LIST01);
			}
		});	
    },
	
    bindingCombobox: function($that, list, strValue){
    	var comboboxOption = "";
    	$.each(list, function(i, listElement){
    		comboboxOption += "<option value='" + listElement.R01 + "'>" + listElement.R02 + "</option>";
    	});
    	$that.html(comboboxOption);
    	if(strValue != undefined)
    		$that.val(strValue);
    },
    // 부서관련 콤보박스!
	getComboBoxList: function(selID, type, strValue, strUserID){
		var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01303");
		tr.body.P01 = type;
		tr.body.P02 = strValue;
		tr.body.P03 = "";
		
		bizMOB.Web.post({
			message: tr,
			success: function(json){
				if(!json.header.result){
					bizMOB.Ui.alert("안내", "본부 목록을 불러오는데 실패하였습니다.");
					return;
				}
				page.setComboBox(selID, json.body.LIST01, strUserID);
			}
		});		
	},
	// 부서관련 콤보박스!
	setComboBox: function(id, list, strUserID){
		var options = "";
		$.each(list, function(i, listElement){
			options += "<option value='" + listElement.R01 + "'>" + listElement.R02 + "</option>";
		});
		$(id).html(options);
		if(strUserID != undefined)
			$(id).val(strUserID);
	},
	setDateTime: function(txtName, btnName){
		$(btnName).click(function(){
			$(txtName).focus();
		});
		var option = cescommutil.datePickerOption(function(date){		 				 
			}, "yy-mm-dd"		 			
		);
		$(txtName).datepicker(option);
	},
	changeDateFormat: function(date, symbol){
		if(date.length != 8)
			return "";
		if(symbol == undefined)
			symbol = "-";
		return date.substr(0, 4) + symbol + date.substr(4, 2) + symbol + date.substr(6, 2);
					
	}
};


