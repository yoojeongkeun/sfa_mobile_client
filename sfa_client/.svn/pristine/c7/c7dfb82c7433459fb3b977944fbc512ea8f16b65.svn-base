tab01 = 
{	 
	list : new Array,
	
    init:function(json)
	{
    	tab01.initInterface();
    	tab01.initData(json);
		tab01.initLayout();
	},
	initInterface:function()
	{
		 $(".t01_btnSearch").click(function(){
			 //bizMOB.Ui.alert("TAB1에서 조회버튼");
			 tab01.setSearchList();
		 });
		 
		 $(".t01_btnClear").click(function(){
			 $('select[id*="t01"]').val("N");
			 
			 var nowDate  = new Date();
	 		 $("#t01_calFromtDay").val(nowDate.bMToFormatDate("yyyy-mm-dd"));
	 		 $("#t01_calToDay").val(nowDate.bMToFormatDate("yyyy-mm-dd"));
			 
			 $("#rdCon1").attr("checked", true);
		 });
		 
		 $("#contlistnew").delegate(".t01_btnSalesPass", "click", function() {
			 var $this = $(this);
			 bizMOB.Ui.openDialog("sales/html/SD013_pop.html", {
		           width : "99%",
				   height : "68%",
				   message : {
					   CustCode : $this.parent().parent().parent().parent().find(".t01_CustCode").text(),
					   UserId : bizMOB.Storage.get("UserID")
				   }
				});
		 });
		 
		 $("#contlistnew").delegate(".t01_btnCustInfo", "click", function() {
			 var $this = $(this);
			 bizMOB.Web.open("custmaster/html/CM005.html", {
					modal : false,
					replace : false,
					message : {custCode : $this.parent().parent().parent().parent().find(".t01_CustCode").text()}
				});
		 });
		 
		 $("#t01_setTypeLarge").change(function(){
			 page.setTypeMediumCombobox($("#t01_setTypeMedi"), $("#t01_setTypeLarge"));
		 });
		 
		 page.setTypeLargeCombobox($("#t01_setTypeLarge"));
		 
		 $("#t01_selHQ").change(function(){
			 page.getComboBoxList("#t01_selBR", "B01", $(this).val());
		 });
		 
		 $("#t01_selBR").change(function(){
			 page.getComboBoxList("#t01_selUserID", "C01", $(this).val());
		 });
		 
		 page.setDateTime("#t01_calFromtDay", "#t01_btnFromCal");	
		 page.setDateTime("#t01_calToDay", "#t01_btnToCal");	
		 
		 var nowDate  = new Date();
 		 $("#t01_calFromtDay").val(nowDate.bMToFormatDate("yyyy-mm-dd"));
 		 $("#t01_calToDay").val(nowDate.bMToFormatDate("yyyy-mm-dd"));
	 		
 		 $("#btnOpen").click(function(){
    		 $(".searchDiv").toggle();
    		 /*if($(".searchDiv").is(":visible")){
    			 $(".divWrap").css("top", "305px");
    		 }else{
    			 $(".divWrap").css("top", "32px");
    		 }  */  		
    	 });
 		 
 		$("#rdCon1").attr("checked", true);
			
	},	 
	initData:function(json)
	{
		 
	},	 
	initLayout:function()
	{	
		// 본부 콤보박스
		page.getComboBoxList("#t01_selHQ", "A01", "");
		
		tab01.setCommonCombo();
	},
	
	setCommonCombo: function(callback){
		var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01304");
		tr.body.P01 = "";
		bizMOB.Web.post(
		{
			message:tr,
			success:function(json)
			{				
				if(!json.header.result)
				{
					bizMOB.Ui.alert("경고", json.header.error_text);
					return;
				}
				else
				{
					list = json.body;
					
					//if(callback) callback();
					
					//tab01.setComboBox(list);
					
					$("#t01_selJobGroup option").remove();
					$("#t01_selBusiType option").remove();
					$("#t01_selSalesTrans option").remove();
					$("#t01_selReportType option").remove();
					
					var listCode1 = list.LIST01;

					for ( var i = 0; i < listCode1.length; i++) {
						$("#t01_selJobGroup").append(
								"<option value='" + listCode1[i].R01 + "'>" + listCode1[i].R02 + "</option>");
					}
					
					var listCode2 = list.LIST02;

					for ( var i = 0; i < listCode2.length; i++) {
						$("#t01_selBusiType").append(
								"<option value='" + listCode2[i].R01 + "'>" + listCode2[i].R02 + "</option>");
					}
					
					var listCode3 = list.LIST03;

					for ( var i = 0; i < listCode3.length; i++) {
						$("#t01_selSalesTrans").append(
								"<option value='" + listCode3[i].R01 + "'>" + listCode3[i].R02 + "</option>");
					}
					
					var listCode4 = list.LIST04;

					for ( var i = 0; i < listCode4.length; i++) {
						$("#t01_selReportType").append(
								"<option value='" + listCode4[i].R01 + "'>" + listCode4[i].R02 + "</option>");
					}
				}
			}		
		});		
	},
	
	setSearchList:function()
	{
		var rdCon = ""; //서비스유형
		if($("#rdCon1").is(":checked")) { rdCon = "N"; } //전체
		if($("#rdCon2").is(":checked")) { rdCon = "2"; } //외근
		if($("#rdCon3").is(":checked")) { rdCon = "3"; } //내근
		
		var tr = bizMOB.Util.Resource.getTr("Cesco", "SD01306");
		tr.body.P01 = "2011-01-10";//$("#t01_calFromtDay").val();
		tr.body.P02 = "2011-02-20";//$("#t01_calToDay").val();
		tr.body.P03 = $("#t01_txtCustCode").val() == "" ? "N" : $("#t01_txtCustCode").val();
		tr.body.P04 = $("#t01_txtCustName").val();
		tr.body.P05 = "10225";//$("#t01_selBR").val() == "" ? "N" : ($("#t01_selBR").val() == "0" ? "N" : $("#t01_selBR").val());
		tr.body.P06 = $("#t01_selUserID").val() == "" ? "N" : ($("#t01_selUserID").val() == "0" ? "N" : $("#t01_selUserID").val());
		tr.body.P07 = $("#t01_setTypeLarge").val() == "" ? "N" : $("#t01_setTypeLarge").val();
		tr.body.P08 = $("#t01_setTypeMedi").val() == "0" ? "N" : ($("#t01_setTypeMedi").val() == "0" ? "N" : $("#t01_setTypeMedi").val());
		tr.body.P09 = $("#t01_selBusiType").val();
		tr.body.P10 = rdCon;
		tr.body.P11 = $("#t01_selWorkType").val();
		tr.body.P12 = $("#t01_selDeType").val();
		tr.body.P13 = $("#t01_selActReason").val();
		tr.body.P14 = $("#t01_selCounResult").val();
		tr.body.P15 = $("#t01_selFutPlan").val();
		tr.body.P16 = $("#t01_selJobGroup").val() == "N" ? "" : $("#t01_selJobGroup").val();
		tr.body.P17 = $("#t01_selSalesTrans").val();
		
		bizMOB.Web.post(
		{
			message:tr,
			success:function(json)
			{
				if(json.header.result==false)
				{
					bizMOB.Ui.alert("경고", json.header.error_text);
					return;
				}
				tab01.renderList(json);
			}
		});		
	},
	
	renderList:function(json)
	{
		// 항목 리스트를 셋팅하기
		var dir = 
		[
		 	{
		 		type:"loop",
		 		target:"#t01_conBody",
		 		value:"LIST",
		 		detail:
	 			[
	 			 	{type:"single", target:".t01_Seq", value:"R05"},
	 			 	{type:"single", target:".t01_MngNm", value:"R17"},
	 			 	{type:"single", target:".t01_ActDay", value:"R02"},
	 			 	{type:"single", target:".t01_CustCode", value:"R01"},
	 			 	{type:"single", target:".t01_CustNm", value:"R18"},
	 			 	{type:"single", target:".t01_WorkDay", value:"R02"},
	 			 	{type:"single", target:".t01_WorkTime", value:"R03"},
	 			 	{type:"single", target:".t01_ConnType", value:"R08"},
	 			 	{type:"single", target:".t01_WorkType", value:"R09"},
	 			 	{type:"single", target:".t01_DetailType", value:"R10"},
	 			 	{type:"single", target:".t01_ActReason", value:"R11"},
	 			 	{type:"single", target:".t01_CounResult", value:"R12"},
	 			 	{type:"single", target:".t01_FuturePlan", value:"R13"},
	 			 	{type:"single", target:".t01_C_FN", value:function(arg)
	 			 		{  
                    	   	return parseInt(arg.item.R23);
					    }
	 			 	},
	 			 	{type:"single", target:".t01_C_FN@style", value:function(arg)
	 			 		{  
	 			 			if(arg.item.R23.length == 0)
	 			 				return "display:none;";
	 			 			else
	 			 				return "";
					    }
	 			 	},
	 			 	{type:"single", target:".t01_E_FN", value:function(arg)
					    {  
                    	   	return arg.item.R25;
					    }
	 			 	},
	 			 	{type:"single", target:".t01_E_FN@style", value:function(arg)
					    {  
		 			 		if(arg.item.R25.length == 0)
	 			 				return "display:none;";
	 			 			else
	 			 				return "";
					    }
	 			 	},
	 			 	{type:"single", target:".t01_P_FN", value:function(arg)
					    {  
                    	   	return arg.item.R27;
					    }
	 			 	},
	 			 	{type:"single", target:".t01_P_FN@style", value:function(arg)
					    {  
		 			 		if(arg.item.R27.length == 0)
	 			 				return "display:none;";
	 			 			else
	 			 				return "";
					    }
	 			 	},
	 			 	{type:"single", target:".t01_I_FN", value:function(arg)
					    {  
                    	   	return arg.item.R29;
					    }
	 			 	},
	 			 	{type:"single", target:".t01_I_FN@style", value:function(arg)
					    {  
		 			 		if(arg.item.R29.length == 0)
	 			 				return "display:none;";
	 			 			else
	 			 				return "";
					    }
	 			 	},
 		        ]
		 	}
		];
		// 반복옵션(이전의 항목을 삭제하는 옵션)
		var options = { clone:true, newId:"contlistnew", replace:true };
		// 그리기
		$("#contlist").bMRender(json.body, dir, options);
		
		$(".bx-viewport").css("height", ($("#tab01").height() + 56) + "px");
	},
};


